(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02395619"],{"1c4c":function(t,e,a){"use strict";var n=a("9b43"),i=a("5ca1"),s=a("4bf8"),o=a("1fa8"),l=a("33a4"),r=a("9def"),c=a("f1ae"),d=a("27ee");i(i.S+i.F*!a("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,i,u,h=s(t),m="function"==typeof this?this:Array,f=arguments.length,v=f>1?arguments[1]:void 0,p=void 0!==v,g=0,b=d(h);if(p&&(v=n(v,f>2?arguments[2]:void 0,2)),void 0==b||m==Array&&l(b))for(e=r(h.length),a=new m(e);e>g;g++)c(a,g,p?v(h[g],g):h[g]);else for(u=b.call(h),a=new m;!(i=u.next()).done;g++)c(a,g,p?o(u,v,[i.value,g],!0):i.value);return a.length=g,a}})},"42ed":function(t,e,a){"use strict";var n=a("7d97"),i=a.n(n);i.a},"5df3":function(t,e,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=n(e,a),this._i+=t.length,{value:t,done:!1})}))},"7d97":function(t,e,a){},8865:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data"},[a("vx-card",{staticClass:"mb-5"},[a("div",{staticClass:"md:flex"},[a("div",{staticClass:"lg:w-1/3 sm:w-full mt-4 md:mt-0"},[a("v-select",{attrs:{disabled:t.disabled,placeholder:"-- Pilih Entitas --",label:"nama",options:t.city},model:{value:t.citySelected,callback:function(e){t.citySelected=e},expression:"citySelected"}})],1),a("div",{staticClass:"lg:w-1/4 sm:w-full mt-4 md:mt-0 md:ml-6"},[a("datepicker",{attrs:{minimumView:"month",maximumView:"year",format:"MMM yyyy",disabled:t.disabled},model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}})],1),a("div",{staticClass:"mt-4 md:mt-0 md:ml-6"},[a("vs-button",{staticStyle:{display:"inline","margin-right":"30px"},attrs:{disabled:t.disabled,radius:"",color:"primary",icon:"search"},on:{click:t.loadDataServer}}),a("vs-button",{attrs:{disabled:t.excell,type:"border"},on:{click:function(e){return t.tableToExcel("table","Neraca")}}},[a("i",{staticClass:"feather icon-file-text"})])],1)])]),a("vx-card",{directives:[{name:"show",rawName:"v-show",value:t.table.length>0,expression:"table.length > 0"}]},[a("div",{ref:"table",attrs:{hidden:"",id:"loremTable",summary:"lorem ipsum sit amet",rules:"groups",frame:"hsides"}},[a("h4",[t._v("Bulan : "+t._s(t._f("moment")(t.selectedMonth,"MMMM YYYY")))]),a("table",[a("thead",[a("tr",{staticClass:"bg-primary text-white"},[a("th",[t._v("Group")]),a("th",[t._v("Akun")]),a("th",[t._v("Keterangan")]),a("th",{staticClass:"text-center"},[t._v("Jumlah")])])]),a("tbody",t._l(t.arrayTreeObj,(function(e,n){return a("tr",{key:n,class:[null!=e.child?"greyLine":""]},[a("td",[t._v(" "+t._s(e.group)+" ")]),a("td",{attrs:{"data-th":"ID"}},[a("span",{style:t.setPadding(e)},[t._v(t._s(e.id))])]),a("td",{attrs:{"data-th":"Name"},on:{click:function(a){return t.toggle(e)}}},[a("span",{style:t.setPadding(e)},[a("vs-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:t.iconName(e),color:"primary"}}),t._v(" "+t._s(e.desc)+" ")],1)]),a("td",{staticClass:"text-right",attrs:{width:"20%","data-th":"Account"}},[0==e.editable?a("div",[a("span",[t._v(t._s(e.amount))])]):a("div",[a("span",[t._v(t._s(e.amount)+" ")])])])])})),0)])]),a("table",{staticClass:"w-full table table-responsive mt-4"},[a("thead",[a("tr",{staticClass:"bg-primary text-white"},[a("th",[t._v("Group")]),a("th",[t._v("Akun")]),a("th",[t._v("Keterangan")]),a("th",{staticClass:"text-center"},[t._v("Jumlah")])])]),a("tbody",t._l(t.arrayTreeObj,(function(e,n){return a("tr",{key:n,class:[null!=e.child?"greyLine":""]},[a("td",[t._v(" "+t._s(e.group)+" ")]),a("td",{attrs:{"data-th":"ID"}},[a("span",{style:t.setPadding(e)},[t._v(" "+t._s(e.id)+" ")])]),a("td",{attrs:{"data-th":"Name"},on:{click:function(a){return t.toggle(e)}}},[a("span",{style:t.setPadding(e)},[a("vs-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:t.iconName(e),color:"primary"}}),t._v(" "+t._s(e.desc)+" ")],1)]),a("td",{staticClass:"text-right",attrs:{width:"20%","data-th":"Account"}},[0==e.editable?a("div",[a("imoney",{attrs:{disabled:"",readonly:!0},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getNilai(e)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}})],1):a("div",[a("imoney",{staticClass:"child",on:{afterUpdate:function(e){return t.getNilai()}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.next(e)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"item.amount"}})],1)])])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.button,expression:"button == true"}],staticClass:"text-right mt-10"},[a("vs-button",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:t.add}},[t._v("Kirim")]),a("form",{staticStyle:{display:"inline"},on:{submit:function(e){return e.preventDefault(),t.clear(e)}}},[a("vs-button",{attrs:{color:"danger"},on:{click:t.clear}},[t._v("Batal")])],1)],1)])],1)},i=[],s=(a("ac6a"),a("5df3"),a("1c4c"),a("a481"),a("fa33")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"vs-inputx vs-input--input normal mt-2",staticStyle:{"text-align":"right"},attrs:{type:"text",onfocus:"this.select();"},domProps:{value:t.formattedValue},on:{keypress:function(e){return t.isNumber(e)},input:function(e){return t.updateValue(e)}}})},l=[],r=(a("6b54"),a("c5f6"),{name:"Money",props:{value:{required:!0,type:[Number,String],default:0}},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(t){var e=this.unformated(t),a=this.format(e);a!==this.formattedValue&&(this.formattedValue=a)}}},methods:{updateValue:function(t){var e=this.unformated(t.target.value);""===e&&(e=0),this.$emit("input",e),this.$emit("afterUpdate")},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e&&45!==e))return 46===e&&this.formattedValue.toString().indexOf(".")>-1&&t.preventDefault(),!0;t.preventDefault()},format:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},unformated:function(t){return t.toString().replace(/[^0-9.-]/g,"").replace(/(\..*)\./g,"$1").replace(/(?!^)-/g,"").replace(/^0+(\d)/gm,"$1")}}}),c=r,d=a("2877"),u=Object(d["a"])(c,o,l,!1,null,null,null),h=u.exports,m={data:function(){return{uri:"data:application/vnd.ms-excel;base64,",template:'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>{table}</table></body></html>',base64:function(t){return window.btoa(unescape(encodeURIComponent(t)))},format:function(t,e){return t.replace(/{(\w+)}/g,(function(t,a){return e[a]}))},uid:this.$store.state.AppActiveUser.uid,isExpanded:!0,selectedRowID:{},table:[],itemId:null,selectedMonth:new Date,citySelected:null,city:[],nilai:"",updateSubmit:!1,popupActivo:!1,disabled:!1,button:!1,excell:!0}},components:{Datepicker:s["a"],imoney:h},mounted:function(){this.loadEntitas(),this.loadDataLocal()},methods:{tableToExcel:function(t,e){t.nodeType||(t=this.$refs.table);var a=t.innerHTML.replace(/done|remove_circle_outline|/g,""),n={worksheet:e||"Worksheet",table:a};window.location.href=this.uri+this.base64(this.format(this.template,n))},loadEntitas:function(){this.city=this.$store.state.AppActiveUser.entitas},getNilai:function(){this.sumRecrusive(this.table)},next:function(){var t=Array.from(event.target.form.querySelectorAll(".child")),e=t.indexOf(event.target);e<t.length&&t[e+1].focus()},loadDataLocal:function(){var t=this,e=JSON.parse(localStorage.getItem("neraca_"+this.uid));null!=e&&this.$swal.fire({title:"Apakah Anda Yakin ?",text:"Ingin Melanjutkan Data Yang Sebelumnya",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya"}).then((function(a){a.value&&(t.citySelected=e.citySelected,t.selectedMonth=new Date(e.selectedMonth),t.table=e.table,t.disabled=!0,t.button=!0,t.excell=!1)}))},loadDataServer:function(){var t=this;if(null==this.citySelected)this.$swal.fire("Oopss !","Anda Belum Memilih Entitas","error");else{this.$vs.loading();var e=btoa(this.selectedMonth),a=btoa(this.citySelected.kode);this.$http.get("neraca/"+e+"/"+a).then((function(e){t.table=e.data.message[0].account,t.sumRecrusive(t.table),t.disabled=!0,t.button=!0,t.excell=!1})).catch((function(e){t.$vs.loading.close(),t.$swal.fire("Oopss !",e.response.data.message,"error")})).finally((function(){setTimeout((function(){t.$vs.loading.close()}),2e3)}))}},add:function(){this.addToLocal(),this.addToServer()},addToLocal:function(){var t={selectedMonth:this.selectedMonth,citySelected:this.citySelected,table:this.table};localStorage.setItem("neraca_"+this.uid,JSON.stringify(t))},addToServer:function(){var t=this,e=new Intl.DateTimeFormat("id",{year:"numeric"}).format(this.selectedMonth),a=new Intl.DateTimeFormat("id",{month:"long"}).format(this.selectedMonth);this.$swal.fire({title:"<h3><strong>Apakah Anda Yakin Melanjutkan ?</strong></h3>",html:'<span class="text-center">Untuk Mengirimkan Data Bulan <strong>'+a+e+"</strong> Entitas <strong>"+this.citySelected.nama+"</strong></span>",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya"}).then((function(e){if(e.value){var a={bulan:t.selectedMonth,entitas:t.citySelected,data:t.table,aksi:"CEK"};t.$http.post("neraca",a).then((function(e){200==e.status&&t.$swal.fire({html:e.data.message,width:650,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Simpan"}).then((function(e){if(e.value){var a={bulan:t.selectedMonth,entitas:t.citySelected,data:t.table,aksi:"SIMPAN"};t.$http.post("neraca",a).then((function(e){200==e.status?(localStorage.removeItem("neraca_"+t.uid),t.$swal.fire("Success !",e.data.message,"success"),t.reset()):t.$swal.fire("Gagal !","Data Tidak Jadi Disimpan","error")}))}else t.$swal.fire("Gagal !","Tidak Jadi Disimpan","error")}))})).catch((function(e){t.$vs.loading.close(),t.$swal.fire("Gagal !",e.response.data.message,"error")}))}else t.button=!0})).catch((function(e){t.$vs.loading.close(),t.$swal.fire("Gagal !",e.response.data.message,"error")}))},clear:function(){var t=this;this.$swal.fire({title:"Apakah Yakin Ingin Batal ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya"}).then((function(e){e.value?(t.reset(),t.$swal.fire({title:"Success",text:"Data Yang Anda Input Berhasil Di Batalkan",icon:"success",timer:1500,showCancelButton:!1,showConfirmButton:!1})):t.button=!0}))},reset:function(){this.citySelected=null,this.selectedMonth=new Date,this.table=[],this.$validator.reset(),this.disabled=!1,this.button=!1,this.excell=!0},sumRecrusive:function(t){var e=this,a=0;return t.forEach((function(t){t.child&&0!=t.child.length?(t.amount=e.sumRecrusive(t.child),a+=t.amount):isNaN(t.amount)||(a+=parseFloat(t.amount))})),a},recursive:function(t,e,a,n,i){var s=this,o=0;return t.forEach((function(t){if(!t.child||0==t.child.length)return t.level=a,t.leaf=!0,e.push(t),!1;t.level=a,t.leaf=!1,e.push(t),t.id==n&&(t.expend=i),void 0==t.expend&&(t.expend=!0),1==t.expend&&s.recursive(t.child,e,t.level+1,n,i)})),o},iconName:function(t){return 1==t.expend?"remove_circle_outline":t.child&&t.child.length>0?"control_point":"done"},toggle:function(t){var e=this;e.itemId=t.id,e.selectedRowID=t.id,t.leaf=!1,0==t.leaf&&0==t.expend&&void 0!=t.child&&0!=t.child.length&&e.recursive(t.child,[],t.level+1,t.id,!0),1==t.expend&&void 0!=t.child&&(t.child.forEach((function(t){t.expend=!1})),e.$set(t,"expend",!1),e.$set(t,"leaf",!1),e.itemId=null)},setPadding:function(t){return"padding-left: ".concat(20*t.level,"px;")}},computed:{arrayTreeObj:function(){var t=this,e=[];return t.recursive(t.table,e,0,t.itemId,t.isExpanded),e}},watch:{selectedIDRow:function(t){null!=this.selectedRowID&&this.$set(this.selectedRowID,"id",t)}}},f=m,v=(a("42ed"),Object(d["a"])(f,n,i,!1,null,"c8ad2914",null));e["default"]=v.exports},f1ae:function(t,e,a){"use strict";var n=a("86cc"),i=a("4630");t.exports=function(t,e,a){e in t?n.f(t,e,i(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-02395619.d31a39be.js.map